import * as React from "react";
import styled from "styled-components";
import {
  SPADE_COLOR,
  HEART_COLOR,
  DIAMOND_COLOR,
  CLUB_COLOR,
  INVERSE_SPADE_COLOR
} from "../../constants/color";
import { Rank, Suit } from "../../models/PlayingCard";

interface Props extends React.Attributes {
  /**
   * The icon's rank.
   */
  rank: Rank;
  /**
   * The suit what the icon for. This affects to the color.
   */
  suit?: Suit;
  className?: string;
  style?: React.CSSProperties;
}

/**
 * A SVG icon React component of playing cards' ranks. There's slight padding at the bottom because of the small bar of "Q".
 */
export default function RankIcon({ rank, suit = Suit.spade, ...props }: Props) {
  return (
    <svg viewBox="0 0 64 82" {...props}>
      <Path d={PATH_DIMENTION_BY_RANK[rank]} fillRule="nonzero" suit={suit} />
    </svg>
  );
}

const COLOR_BY_SUIT: Record<Suit, string> = {
  [Suit.spade]: SPADE_COLOR,
  [Suit.heart]: HEART_COLOR,
  [Suit.diamond]: DIAMOND_COLOR,
  [Suit.club]: CLUB_COLOR
};

const DARK_COLOR_BY_SUIT: Record<Suit, string> = {
  [Suit.spade]: INVERSE_SPADE_COLOR,
  [Suit.heart]: HEART_COLOR,
  [Suit.diamond]: DIAMOND_COLOR,
  [Suit.club]: CLUB_COLOR
};

const Path = styled.path<{ suit: Suit }>`
  fill: ${({ suit }) => COLOR_BY_SUIT[suit]};

  @media (prefers-color-scheme: dark) {
    fill: ${({ suit }) => DARK_COLOR_BY_SUIT[suit]};
  }
`;

const PATH_DIMENTION_BY_RANK: Record<Rank, string> = {
  [Rank.ace]:
    "M17.142 62.5l4.232-13.708H42.35L46.49 62.5h16.284L41.522 1.78H22.57L1.226 62.5h15.916zm21.896-24.472h-14.26L29.286 23.4l2.484-9.476h.184l2.668 9.568 4.416 14.536z",
  [Rank.deuce]:
    "M55.644 62.5V50.448h-14.26c-3.864 0-9.2.184-12.236.368v-.092c16.468-9.476 25.76-18.492 25.76-30.36C54.908 10.888 48.1.86 32 .86 18.384.86 8.448 8.128 8.172 21.56l13.524 4.14c.184-8.096 3.496-12.42 9.292-12.42 5.428 0 8.188 3.496 8.188 8.188 0 8.556-8.28 17.94-29.072 30.912V62.5h45.54z",
  [Rank.three]:
    "M31.494 63.42c13.708 0 23.552-6.992 23.552-17.48 0-10.764-8.372-13.8-12.604-13.8v-.276c3.496 0 11.408-3.772 11.408-13.984C53.85 7.576 46.03.86 32.23.86 20.454.86 11.07 5.276 8.954 16.592l13.892 4.692c.552-5.796 3.772-8.188 8.464-8.188 4.6 0 7.268 2.484 7.176 7.176 0 4.692-2.668 6.992-8.464 6.992h-2.668v10.028h3.404c6.164 0 8.924 1.84 9.016 6.532.092 4.692-3.128 7.36-8.464 7.36-5.428 0-8.74-2.484-9.384-9.016L7.574 48.332c3.404 10.672 11.132 15.088 23.92 15.088z",
  [Rank.four]:
    "M49.848 62.5V49.16h9.292V38.304h-9.292V1.78H31.356L5.32 41.708v7.452h30.544V62.5h13.984zM35.864 38.304H20.04l10.672-16.192c1.932-3.036 4.048-6.716 5.336-9.936h.184l-.368 9.936v16.192z",
  [Rank.five]:
    "M31.678 63.42c12.972 0 23.644-6.808 23.644-21.712 0-10.672-7.084-18.4-19.044-18.4-5.428 0-10.028 1.564-12.512 4.324h-.092c.092-.276.276-1.012.46-2.208l1.38-11.408h26.404V1.78H14.014L10.15 36.096l11.96 1.748c2.116-2.484 5.52-3.588 9.66-3.588 6.164 0 9.2 3.128 9.292 8.556 0 5.704-3.68 8.648-9.292 8.648-6.532 0-8.832-3.036-9.936-8.096L7.942 51.276c5.336 8.832 12.972 12.144 23.736 12.144z",
  [Rank.six]:
    "M33.564 63.42c14.812 0 23.368-7.728 23.368-19.872 0-11.5-8.372-18.86-19.688-18.86-7.084 0-12.604 2.76-14.72 8.004h-.184V31.22c0-11.132 4.876-17.848 11.592-17.848 5.06 0 8.004 2.668 9.2 6.992l12.972-6.072C52.7 4.448 44.696.86 34.944.86c-15.18 0-26.68 9.752-26.68 31.28 0 20.424 9.108 31.28 25.3 31.28zm.276-11.868c-5.336 0-8.648-3.128-8.648-8.096s3.312-8.096 8.648-8.096c5.52 0 8.648 2.944 8.648 8.096s-3.128 8.096-8.648 8.096z",
  [Rank.seven]:
    "M37.704 62.5c0-18.676 4.692-34.776 19.872-49.496V1.78H7.62V14.2h34.5C28.136 28.552 22.064 44.192 22.064 62.5h15.64z",
  [Rank.eight]:
    "M31.954 63.42c15.456 0 24.748-6.532 24.748-17.02 0-7.544-4.324-12.512-11.592-14.904v-.092c6.164-2.3 9.66-7.084 9.66-13.34 0-10.58-8.74-17.02-22.816-17.02-13.984 0-22.724 6.44-22.724 17.02 0 6.348 3.588 11.04 9.66 13.34v.092C11.53 33.888 7.298 38.948 7.298 46.4c0 10.488 9.384 17.02 24.656 17.02zm0-36.892c-4.876 0-8.004-2.668-8.004-6.992 0-4.416 3.036-6.992 8.004-6.992s8.096 2.576 8.096 6.992c0 4.324-3.128 6.992-8.096 6.992zm0 25.392c-5.796 0-9.292-2.852-9.292-7.544 0-4.784 3.588-7.544 9.292-7.544 5.888 0 9.384 2.76 9.384 7.544 0 4.692-3.496 7.544-9.384 7.544z",
  [Rank.nine]:
    "M30.482 63.42c16.008 0 25.76-9.2 25.76-30.912C56.242 11.716 47.226.86 31.126.86 16.13.86 7.482 8.588 7.482 21.468c0 11.776 8.832 19.32 19.688 19.32 6.624 0 12.88-2.668 14.536-8.004h.276v1.472c0 11.04-3.496 17.204-11.224 17.204-5.336 0-7.36-2.668-8.372-6.9L8.218 50.172c3.772 9.2 11.224 13.248 22.264 13.248zm.184-33.948c-5.52 0-8.648-2.944-8.648-8.096s3.128-8.096 8.648-8.096c5.428 0 8.648 3.128 8.648 8.096s-3.22 8.096-8.648 8.096z",
  [Rank.ten]: "M39.958 62.5V14.016h19.78V1.78H4.262v12.236h19.872V62.5z",
  [Rank.jack]:
    "M29.286 63.42c16.284 0 25.576-8.924 25.576-24.288V1.78H39.038v35.696c0 9.2-2.392 13.524-9.016 13.524-6.716 0-9.2-4.14-7.636-15.272l-15.64 2.76C4.078 53.116 11.162 63.42 29.286 63.42z",
  [Rank.queen]:
    "M45.564 77.77c6.992 0 12.512-1.574 15.64-4.196l-3.772-10.929c-2.484 2.186-6.256 3.41-11.316 3.41-5.244 0-8.74-1.137-9.292-5.508 15.548-1.836 24.84-12.502 24.84-29.462 0-18.622-11.224-29.725-29.716-29.725S2.14 12.463 2.14 31.085c0 16.785 9.2 27.451 24.472 29.375-.736 10.666 5.98 17.31 18.952 17.31zM31.948 49.007c-8.832 0-13.616-6.12-13.616-17.922 0-11.803 4.784-17.923 13.616-17.923 8.74 0 13.524 6.12 13.524 17.923 0 11.802-4.784 17.922-13.524 17.922z",
  [Rank.king]:
    "M22.662 62.5V45.388l7.36-9.016L45.11 62.5h17.94L41.338 26.436 61.946 1.78H44.374L22.662 28.736V1.78H6.838V62.5z"
};
